<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <script>
          var util = (function(){
              var u = navigator.userAgent.toLowerCase();
              return {
                  isIphone : function(){return (RegExp("iphone").test(u) || RegExp("ipod touch").test(u))},
                  isIpad : function(){return RegExp("ipad").test(u)},
                  isAndroid : function(){return (RegExp("android").test(u) || RegExp("android 2").test(u))},
                  isMB : function(){return (util.isIphone() || util.isIpad() || util.isAndroid())}
              };
          })();
          window.util = util;
          (function(){
              if( !util.isMB() ){
                  window.location.href = 'http://cloud.tencent.com/';  
              }
          })();
    </script>
    <meta name="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <title>正版授权</title>
 </head>
<body>
<script>
function getUrlParam(name) {
  var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
  var r = window.location.search.substr(1).match(reg);
  if (r != null) return unescape(r[2]);
  return null;
}
var code = getUrlParam("code"); 
var rurl = getUrlParam("rurl"); 
var acode = getUrlParam("acode");
var aurl = getUrlParam("aurl");
var redirect_uri = 'http://' + window.location.host + '/site/wxredd.html?rurl=' + rurl;
if(!code){
	window.location.href = 'http://'+aurl+'?appid='+ acode +'&redirect_uri='+ encodeURI(redirect_uri) +'&response_type=code&scope=snsapi_userinfo#wechat_redirect';  
}else{
    if(rurl.indexOf("?",0)!=-1){
	   window.location.href = rurl + '&code=' +  code;
	}else{
	   window.location.href = rurl + '?code=' +  code;
	}
}
</script>
</body>
</html>